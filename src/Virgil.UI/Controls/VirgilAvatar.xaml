<UserControl x:Class="Virgil.UI.Controls.VirgilAvatar"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignWidth="220" d:DesignHeight="220">
  <Grid>
    <!-- Halo -->
    <Ellipse Width="180" Height="180" StrokeThickness="2">
      <Ellipse.Stroke>
        <RadialGradientBrush GradientOrigin="0.5,0.5" Center="0.5,0.5" RadiusX="0.8" RadiusY="0.8">
          <GradientStop Color="#00FFFFFF" Offset="0.0"/>
          <GradientStop Color="#55FFFFFF" Offset="1.0"/>
        </RadialGradientBrush>
      </Ellipse.Stroke>
    </Ellipse>

    <!-- Corps -->
    <Ellipse x:Name="Core" Width="160" Height="160"
             Fill="{StaticResource Brush.BgPanel}"
             Stroke="{StaticResource Brush.Accent}" StrokeThickness="3">
      <Ellipse.Effect>
        <DropShadowEffect x:Name="PulseShadow" BlurRadius="18" ShadowDepth="0" Color="#33FFFFFF" Opacity="0.6"/>
      </Ellipse.Effect>
      <Ellipse.RenderTransform>
        <ScaleTransform x:Name="CoreScale" ScaleX="1" ScaleY="1"/>
      </Ellipse.RenderTransform>
    </Ellipse>

    <!-- Visage simplifié : "yeux" + "bouche" vectorielle  -->
    <Grid>
      <Grid Width="140" Height="100">
        <Ellipse x:Name="EyeL" Width="16" Height="16" Fill="{StaticResource Brush.Text}" HorizontalAlignment="Left"  Margin="20,20,0,0"/>
        <Ellipse x:Name="EyeR" Width="16" Height="16" Fill="{StaticResource Brush.Text}" HorizontalAlignment="Right" Margin="0,20,20,0"/>
        <!-- <Path x:Name="Mouth" StrokeThickness="4" StrokeEndLineCap="Round" StrokeStartLineCap="Round"
              Stroke="{StaticResource Brush.Accent}" Data="M 30 70 Q 70 90 110 70"/> -->
      </Grid>
    </Grid>

    <!-- Statut -->
    <Border HorizontalAlignment="Center" VerticalAlignment="Bottom" Margin="0,0,0,10"
            Background="#33000000" Padding="8,4" CornerRadius="8">
      <TextBlock Text="{Binding StatusText, RelativeSource={RelativeSource AncestorType=UserControl}}"
                 Foreground="{StaticResource Brush.Text}" FontSize="12" />
    </Border>
  </Grid>

  <!-- États visuels -->
  <UserControl.Triggers>
    <!-- Idle pulse -->
    <EventTrigger RoutedEvent="Loaded">
      <BeginStoryboard>
        <Storyboard RepeatBehavior="Forever" AutoReverse="True">
          <DoubleAnimation Storyboard.TargetName="CoreScale" Storyboard.TargetProperty="ScaleX" From="1" To="1.04" Duration="0:0:2"/>
          <DoubleAnimation Storyboard.TargetName="CoreScale" Storyboard.TargetProperty="ScaleY" From="1" To="1.04" Duration="0:0:2"/>
          <DoubleAnimation Storyboard.TargetName="PulseShadow" Storyboard.TargetProperty="BlurRadius" From="12" To="22" Duration="0:0:2"/>
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger>
  </UserControl.Triggers>
</UserControl>

